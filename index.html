<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dosis Perronas</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-slate-950 text-white">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    function App() {
      const [medications, setMedications] = useState([]);

      useEffect(() => {
        fetch("medications.json")
          .then((res) => res.json())
          .then((data) => setMedications(data))
          .catch((err) => console.error("Error al cargar medicamentos:", err));
      }, []);

      return (
        <div className="p-6">
          <h1 className="text-2xl font-bold mb-6">ðŸ“‹ Base de Medicamentos</h1>
          {medications.map((med) => (
            <div key={med.name} className="mb-8 p-4 border rounded bg-slate-800">
              <h2 className="text-xl font-semibold text-blue-300">{med.name}</h2>
              {med.family && <p><strong>Familia:</strong> {Array.isArray(med.family) ? med.family.join(", ") : med.family}</p>}
              {med.commercial_names && <p><strong>Nombres comerciales:</strong> {med.commercial_names.join(", ")}</p>}

              {med.doses && Object.entries(med.doses).map(([species, doses]) => (
                <div key={species} className="mt-3">
                  <h3 className="text-lg text-blue-400">{species}</h3>
                  {doses.map((d, i) => (
                    <p key={i} className="ml-4">
                      â€¢ {d.proposito}: {d.dosis} ({d.ruta}, {d.frecuencia})  
                      [Min: {d.min} / Rec: {d.rec} / Max: {d.max}]
                    </p>
                  ))}
                </div>
              ))}
            </div>
          ))}
        </div>
      );
    }

    ReactDOM.render(<App />, document.getElementById("root"));
  </script>
</body>
</html>
